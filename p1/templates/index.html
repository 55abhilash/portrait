<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Portrait : A free and open source systems management software!</title>

    <script src="/static/jquery.min.js"></script>
    <link rel="stylesheet" href="/static/css/jquery-ui.css">    
    <script src="/static/jquery-ui.js"></script>
    <script src="/static/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">

    <style>
        #tabs .ui-tabs-active {
            background: #966220;
        }
        #header {
	        position: relative;
	        height: 70px;
            width: 100%;
            background: #966220;
        }
        
        #welcome {
            margin-top: 18px;
            text-align: center;
            color: white;
            font-size: 165%; 
        }
        
        #loginuser {
            margin-top: 25px;
            text-align: center;
            color: white;
            font-size: 100%; 
        }

        body {
            margin: 0;
            font-family: 'Exo', sans-serif;
            font-weight: 500;
        }

    </style>

</head>

<body>
                <div class="row header" id="header">
                    <div class="col-md-4" id="welcome">PORTRAIT</div>
                    <div class="col-md-4"></div>
                    <div class="col-md-4" id="loginuser">{{ request.user }}&nbsp; &nbsp; &nbsp; <a href="http://localhost/logout/" style="color:white;">Logout</a></div>
                </div>
			<script>
					$(function() {
						$("#tabs").tabs();
					});
			</script>

				<div id="tabs">
						<ul style="width:100%; text-align:center;">
							<li style="width:30%;"><a href="#tabs-1">Dashboard</a></li>
							<li style="width:30%;"><a href="#tabs-2">Machines</a></li>
							<li style="width:30%;"><a href="#tabs-3">Running Tasks</a></li>
						</ul>
						<div id="tabs-1">
				   

						<form method='post' id="f">
						    {% csrf_token %}
						    <button id="b" type='submit' form="f"> 
							    SEND
							</button>
						</form>
						<br>
                        <form method="post" id="f2">
                            {% csrf_token %}
                            <button id="b2" type='submit' form="f2"> 
							    INSERT
							</button>
						</form>
													
                        <div id="div1"></div>
												
                        <script>
						    $(document).ready(function() {
							    $("#f").submit(function(event){
								    $.ajax({
										type:"POST",
				    					 url:"http://localhost",
										 data: {
							    			'postid' : '1',
											'csrfmiddlewaretoken': '{{ csrf_token}}',       					
										 },
										 success: function(data){
				    						 if(data.status == '1') {   
                                                $('#div1').html(data) 
											 }
	    									 else if(data.status == '0') {
											    window.location(data.url)
											 }
										 }
									});
									return false; //<---- move it here
								});
						    });

							$(document).ready(function() {
							    $("#f2").submit(function(event){
								    $.ajax({
										 type:"POST",
										 url:"http://localhost",
				    					 data: {
								    		'postid' : '2',
											'csrfmiddlewaretoken': '{{ csrf_token}}',       					
										 },
										 success: function(data){
											$('#div1').html(data) 
                                         }
									});
									return false; //<---- move it here
								});
							});

							</script>
                        </div>
                        
                        <div id="tabs-2" style="display:flex;">  
                            <div class="sidebar">
                                <style>
                                    .sidebar {
                                        left: 0%;
                                        width: 25%;
                                        height: 100%;
                                    }

                                    .disp-area {
                                        left: 25%;
                                        width: 75%;
                                        height: 100%;
                                    }
                                    ul#nav1 {
                                        list-style-type: none;
                                        padding: 10px;
                                    }
                                    ul#nav1 li {
                                        border-style: none dotted dotted none;
                                        border-width: 1px;
                                        height: 50px;
                                        text-align: center;
                                        color: black;
                                        padding: 10px;
                                        font-family: 'Exo', sans-serif;
                                        font-size: 100%;
                                    }
                                </style>
                                <ul id="nav1">
                                    <li> <a class="tmp" href="http://localhost/all_minions/">All minions</a></li>
                                    <li> <a class="tmp" href="http://localhost/pending_reg/">View Pending Registrations</a></li>
                                    <li> <a class="tmp" href="http://localhost/connect/">Connect To Selected </a></li>
                                </ul>
                            </div>
                            
                            <script>
							    $('a.tmp').click(function (event){ 
					   		        event.preventDefault(); 
                                    $.ajax({
                                        url: $(this).attr('href'),
                                        success: function(response) {
                                            $('#disp_area').css({'left' : '25%', 'width' : '75%', 'font-size' : '150%', 'text-align' : 'center'});
                                            $('#disp_area').html("<b>Pending Registrations</b>");
                                            $('#disp_area').css({'font-size' : '100%'});
                                            $('#disp_area').append("<br>" + response + "&nbsp;&nbsp;<input type='checkbox' id='chk'>&nbsp;<a href='http://localhost/accept?ids=local'>accept</a>");
                                        }
                                    })
                                    return false; //for good measure
                                });
                            </script>
                        <div class="row" id="disp_area"></div>

						</div>
                        
                        <div id="tabs-3">
                        </div>

    </body>
</html>
